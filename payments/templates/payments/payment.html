{% extends 'base.html' %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

<div class="payment-page-wrapper">
    <a href="{% url 'products:list' %}" class="back-link">
        <i class="fas fa-arrow-left"></i> Back to Resources
    </a>

    <div class="payment-container">
        <div class="payment-card">
            <span class="resource-badge">PREMIUM DEVOPS RESOURCE</span>
            <h2>{{ product.title }}</h2>
            <p style="color: #64748b; font-size: 14px;">Complete your details to get instant access.</p>
            
            <div class="price">
                {% if is_free %}FREE{% else %}<span>â‚¹</span>{{ product.price }}{% endif %}
            </div>

            <button id="pay-button" class="pay-btn">
                {% if is_free %}Unlock Vault ðŸš€{% else %}PAY NOW{% endif %}
            </button>

            <div class="secure-footer">
                <i class="fas fa-lock"></i> Verified Secure Transaction â€¢ DevOpsVaultX
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>

<script id="payment-data" type="application/json">
    {
        "csrfToken": "{{ csrf_token }}",
        "isFree": {{ is_free|yesno:"true,false" }},
        "razorpayOrderId": "{{ razorpay_order_id|default:'' }}",
        "razorpayKeyId": "{{ razorpay_key_id }}",
        "amount": "{{ amount }}",
        "productTitle": "{{ product.title }}",
        "successUrl": "{% url 'payments:payment_success' product.id %}"
    }
</script>

<script src="{% static 'payments/js/payment.js' %}"></script>
{% endblock %}