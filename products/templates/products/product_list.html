{% extends 'base.html' %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<div class="products-wrapper">
    <header class="products-hero">
        <div class="container">
            <span class="top-tag">Premium Resources</span>
            <h1>DevOps<span>VaultX</span></h1>
            <p>Stop searching, start automating. Your ultimate vault for industry-ready DevOps resources.</p>
        </div>
    </header>

    <nav class="filter-sticky">
        <div class="filter-container">
            <button class="filter-btn active" data-filter="all">All Items</button>
            <button class="filter-btn" data-filter="notes"><i class="fas fa-file-lines"></i> Notes</button>
            <button class="filter-btn" data-filter="courses"><i class="fa-solid fa-book"></i> Courses</button>
            <button class="filter-btn" data-filter="templates"><i class="fas fa-layer-group"></i> Templates</button>
            <button class="filter-btn" data-filter="tools"><i class="fas fa-screwdriver-wrench"></i> Tools</button>
        </div>
    </nav>

    <main class="main-container">
        <div class="products-grid" id="product-grid">
            {% if products %}
            {% for product in products %}
            <div class="p-card" data-category="{{ product.category|lower }}">
                <div class="p-image-box">
                    {% if product.is_new %}
                    <span class="new-pill">NEW</span>
                    {% endif %}

                    {% if product.image %}
                    <img src="{{ product.image.url }}" alt="{{ product.title }}">
                    {% else %}
                    <div class="p-placeholder">
                        <span class="placeholder-text">No preview</span>
                    </div>
                    {% endif %}
                </div>

                <div class="p-content">
                    <span class="p-cat">{{ product.category|upper }}</span>
                    <h3 class="p-title">{{ product.title }}</h3>
                    <p class="p-desc">{{ product.description|truncatechars:75 }}</p>

                    <div class="p-footer">
                        <div class="p-price">
                            {% if product.price == 0 %}
                            <div class="free-container">
                                <span class="free-spike">FREE</span>
                                <span class="free-glow"></span>
                            </div>
                            {% else %}
                            <i class="fa-solid fa-indian-rupee-sign"></i>
                            <span class="amt"> {{ product.price }}</span>
                            {% endif %}
                        </div>
                        <a href="{% url 'products:detail' product.pk %}" class="p-btn">
                            View <i class="fas fa-arrow-right"></i>
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}

            <div id="js-no-data" class="empty-msg" style="display:none; grid-column: 1/-1;">
                <i class="fa-solid fa-file-circle-minus"></i>
                <h3>No items found in this category!</h3>
                <p>Try exploring another section.</p>
            </div>

            {% else %}
            <div class="empty-msg" style="grid-column: 1/-1;">
                <i class="fas fa-box-open"></i>
                <h3>No Resources Available</h3>
                <p>We are currently updating our vault.</p>
            </div>
            {% endif %}
        </div>
    </main>
</div>
{% endblock %}