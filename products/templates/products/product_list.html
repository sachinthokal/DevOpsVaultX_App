{% extends 'base.html' %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="stylesheet" href="{% static 'products/css/product_list.css' %}">
<script src="{% static 'products/js/product_list.js' %}"></script>


<div class="nav-container">
    <div class="brand-title">PRODUCT VAULT<span>X</span></div>
    <div class="segment-wrapper">
        <button class="segment-btn active" data-filter="all">Explore All</button>
        <button class="segment-btn" data-filter="notes">Notes</button>
        <button class="segment-btn" data-filter="courses">Courses</button>
        <button class="segment-btn" data-filter="templates">Templates</button>
        <button class="segment-btn" data-filter="tools">Tools</button>
    </div>
</div>

<div class="content-wrapper">
    <div class="asset-grid" id="grid">
        {% if products %}
            {% for product in products %}
            <div class="asset-card" data-category="{{ product.category|lower }}" data-price="{{ product.price }}">
                
                {% if forloop.counter <= 6 %}
                    <div class="new-tag">NEW</div>
                {% endif %}

                <div class="card-preview-area">
                    {% if product.image %}
                        <img src="{{ product.image.url }}" alt="" onerror="this.parentElement.innerHTML='<div class=\'no-preview-placeholder\'><i class=\'fas fa-image\'></i><span>NO PREVIEW</span></div>';">
                    {% else %}
                        <div class="no-preview-placeholder">
                            <i class="fas fa-image"></i>
                            <span>NO PREVIEW</span>
                        </div>
                    {% endif %}
                </div>

                <div class="card-info">
                    <span class="card-cat">{{ product.category }}</span>
                    <h3 class="card-name">{{ product.title|truncatechars:38 }}</h3>
                    
                    <div class="card-meta">
                        <div class="price-wrap">
                            {% if product.price == 0 %}
                                <span class="tag-free">FREE</span>
                            {% else %}
                                <span class="tag-price">â‚¹{{ product.price }}</span>
                            {% endif %}
                        </div>
                        <a href="{% url 'products:detail' product.pk %}" class="btn-action">
                            VIEW <i class="fas fa-chevron-right" style="font-size: 8px;"></i>
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        {% endif %}

        <div id="no-data" class="no-data-wrapper">
            <i class="fas fa-folder-open"></i>
            <p>No resources found in this category</p>
        </div>
    </div>
</div>

{% endblock %}